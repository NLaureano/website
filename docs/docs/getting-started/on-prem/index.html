<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/website/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/website/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/website/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/website/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/website/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/website/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/website/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/website/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/website/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/website/favicons/android-192x192.png" sizes="192x192">

<title>Getting started with Fleet using on-premises clusters | KubeFleet</title>
<meta name="description" content="Use on-premises clusters of your own to learn about Fleet">
<meta property="og:url" content="https://kubefleet-dev.github.io/website/docs/getting-started/on-prem/">
  <meta property="og:site_name" content="KubeFleet">
  <meta property="og:title" content="Getting started with Fleet using on-premises clusters">
  <meta property="og:description" content="Use on-premises clusters of your own to learn about Fleet">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">

  <meta itemprop="name" content="Getting started with Fleet using on-premises clusters">
  <meta itemprop="description" content="Use on-premises clusters of your own to learn about Fleet">
  <meta itemprop="wordCount" content="1214">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Getting started with Fleet using on-premises clusters">
  <meta name="twitter:description" content="Use on-premises clusters of your own to learn about Fleet">




<link rel="preload" href="/website/scss/main.min.5118d334f4d49e78b43432d75232dda13144ff70fc9d784048f9c31c8751ea0f.css" as="style">
<link href="/website/scss/main.min.5118d334f4d49e78b43432d75232dda13144ff70fc9d784048f9c31c8751ea0f.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/website/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">KubeFleet</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/website/docs/"><span>Docs</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/website/zh-cn/">中文（简体）</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/website/offline-search-index.dd67057b4ad81463d4109f31fe4d63d8.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/website/offline-search-index.dd67057b4ad81463d4109f31fe4d63d8.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/website/zh-cn/">中文（简体）</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-websitedocs-li">
  <a href="/website/docs/" title="Welcome to KubeFleet Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-websitedocs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-websitedocsconcepts-li">
  <a href="/website/docs/concepts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-websitedocsconcepts"><span class="">Concepts</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptscrpc-li">
  <a href="/website/docs/concepts/crpc/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptscrpc"><span class="">ClusterResourcePlacement</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptscomponents-li">
  <a href="/website/docs/concepts/components/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptscomponents"><span class="">Fleet components</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptsmembercluster-li">
  <a href="/website/docs/concepts/membercluster/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptsmembercluster"><span class="">MemberCluster</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptsscheduler-li">
  <a href="/website/docs/concepts/scheduler/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptsscheduler"><span class="">Scheduler</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptsscheduling-framework-li">
  <a href="/website/docs/concepts/scheduling-framework/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptsscheduling-framework"><span class="">Scheduling Framework</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptsproperties-li">
  <a href="/website/docs/concepts/properties/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptsproperties"><span class="">Properties and Property Provides</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptssafe-rollout-li">
  <a href="/website/docs/concepts/safe-rollout/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptssafe-rollout"><span class="">Safe Rollout</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptsoverride-li">
  <a href="/website/docs/concepts/override/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptsoverride"><span class="">Override</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptsstaged-update-li">
  <a href="/website/docs/concepts/staged-update/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptsstaged-update"><span class="">Staged Update</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsconceptseviction-pdb-li">
  <a href="/website/docs/concepts/eviction-pdb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsconceptseviction-pdb"><span class="">Eviction and Placement Disruption Budget</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-websitedocsgetting-started-li">
  <a href="/website/docs/getting-started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-websitedocsgetting-started"><span class="">Getting Started</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsgetting-startedkind-li">
  <a href="/website/docs/getting-started/kind/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocsgetting-startedkind"><span class="">Getting started with Fleet using KinD clusters</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-websitedocsgetting-startedon-prem-li">
  <a href="/website/docs/getting-started/on-prem/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-websitedocsgetting-startedon-prem"><span class="td-sidebar-nav-active-item">Getting started with Fleet using on-premises clusters</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-websitedocshow-tos-li">
  <a href="/website/docs/how-tos/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-websitedocshow-tos"><span class="">How-To Guides</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tosclusters-li">
  <a href="/website/docs/how-tos/clusters/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tosclusters"><span class="">Managing clusters</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-toscrp-li">
  <a href="/website/docs/how-tos/crp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-toscrp"><span class="">Using the ClusterResourcePlacement API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tosaffinities-li">
  <a href="/website/docs/how-tos/affinities/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tosaffinities"><span class="">Using Affinity to Pick Clusters</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tostopology-spread-constraints-li">
  <a href="/website/docs/how-tos/topology-spread-constraints/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tostopology-spread-constraints"><span class="">Using Topology Spread Constraints to Spread Resources</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tosproperty-based-scheduling-li">
  <a href="/website/docs/how-tos/property-based-scheduling/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tosproperty-based-scheduling"><span class="">Using Property-Based Scheduling</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tostaints-tolerations-li">
  <a href="/website/docs/how-tos/taints-tolerations/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tostaints-tolerations"><span class="">Using Taints and Tolerations</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-toscluster-resource-override-li">
  <a href="/website/docs/how-tos/cluster-resource-override/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-toscluster-resource-override"><span class="">Using the ClusterResourceOverride API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tosresource-override-li">
  <a href="/website/docs/how-tos/resource-override/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tosresource-override"><span class="">Using the ResourceOverride API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocshow-tosenvelope-object-li">
  <a href="/website/docs/how-tos/envelope-object/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-websitedocshow-tosenvelope-object"><span class="">Using Envelope Objects to Place Resources</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsfaq-li">
  <a href="/website/docs/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-websitedocsfaq"><span class="">Frequently Asked Questions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-websitedocsapi-reference-li">
  <a href="/website/docs/api-reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-websitedocsapi-reference"><span class="">API Reference</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/kubefleet-dev/website/tree/main/content/en/docs/getting-started/on-prem.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/kubefleet-dev/website/edit/main/content/en/docs/getting-started/on-prem.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/kubefleet-dev/website/new/main/content/en/docs/getting-started?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/kubefleet-dev/website/issues/new?title=Getting%20started%20with%20Fleet%20using%20on-premises%20clusters" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/kubefleet-dev/kubefleet/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/website/docs/getting-started/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#before-you-begin">Before you begin</a></li>
    <li><a href="#set-up-a-fleet-hub-cluster">Set up a Fleet hub cluster</a></li>
    <li><a href="#connect-a-member-cluster-to-the-hub-cluster">Connect a member cluster to the hub cluster</a></li>
    <li><a href="#use-the-clusterresourceplacement-api-to-orchestrate-resources-among-member-clusters">Use the <code>ClusterResourcePlacement</code> API to orchestrate resources among member clusters.</a>
      <ul>
        <li><a href="#create-the-resources-for-placement">Create the resources for placement</a></li>
        <li><a href="#create-the-clusterresourceplacement-api-object">Create the <code>ClusterResourcePlacement</code> API object</a></li>
        <li><a href="#confirm-the-placement">Confirm the placement</a></li>
      </ul>
    </li>
    <li><a href="#clean-things-up">Clean things up</a></li>
    <li><a href="#whats-next">What&rsquo;s next</a></li>
  </ul>
</nav>
      </div>
    
            
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/website/docs/">Docs</a></li>
  <li class="breadcrumb-item">
    <a href="/website/docs/getting-started/">Getting Started</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Getting started with Fleet using on-premises clusters</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Getting started with Fleet using on-premises clusters</h1>
	<div class="lead">Use on-premises clusters of your own to learn about Fleet</div>
	<header class="article-meta">
		
  </header>
	<p>In this tutorial, you will try Fleet out using a few of your own Kubernetes clusters; Fleet can
help you manage workloads seamlessly across these clusters, greatly simplifying the experience
of day-to-day Kubernetes management.</p>
<blockquote>
<p>Note</p>
<p>This tutorial assumes that you have some experience of performing administrative tasks for
Kubernetes clusters. If you are just gettings started with Kubernetes, or do not have much
experience of setting up a Kubernetes cluster, it is recommended that you follow the
<a href="/website/docs/getting-started/kind/">Getting started with Fleet using Kind clusters</a> tutorial instead.</p></blockquote>
<h2 id="before-you-begin">Before you begin</h2>
<p>To complete this tutorial, you will need:</p>
<ul>
<li>At least two Kubernetes clusters of your own.
<ul>
<li>Note that one of these clusters will serve as your hub cluster; other clusters must be able
to reach it via the network.</li>
</ul>
</li>
<li>The following tools on your local machine:
<ul>
<li><code>kubectl</code>, the Kubernetes CLI tool.</li>
<li><code>git</code></li>
<li><code>curl</code></li>
<li><code>helm</code>, the Kubernetes package manager</li>
<li><code>jq</code></li>
<li><code>base64</code></li>
</ul>
</li>
</ul>
<h2 id="set-up-a-fleet-hub-cluster">Set up a Fleet hub cluster</h2>
<p>The Fleet open-source project manages a multi-cluster environment using a hub-spoke pattern,
which consists of one hub cluster and one or more member clusters:</p>
<ul>
<li>The hub cluster is the portal to which every member cluster connects; it also serves as an
interface for centralized management, through which you can perform a number of tasks,
primarily orchestrating workloads across different clusters.</li>
<li>A member cluster connects to the hub cluster and runs your workloads as orchestrated by the
hub cluster.</li>
</ul>
<p>Any Kubernetes cluster running a supported version of Kubernetes can serve as the hub cluster;
it is recommended that you reserve a cluster
specifically for this responsibility, and do not run other workloads on it. For the best
experience, consider disabling the built-in <code>kube-controller-manager</code> controllers for the
cluster: you could achieve this by setting the <code>--controllers</code> CLI argument; for more information,
see the <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/"><code>kube-controller-manager</code> documentation</a>.</p>
<p>To set up the hub cluster, run the commands below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Replace YOUR-HUB-CLUSTER-CONTEXT with the name of the kubeconfig context for your hub cluster.</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">HUB_CLUSTER_CONTEXT</span><span style="color:#ce5c00;font-weight:bold">=</span>YOUR-HUB-CLUSTER-CONTEXT
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl config use-context <span style="color:#000">$HUB_CLUSTER_CONTEXT</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># The variables below uses the Fleet images kept in the Microsoft Container Registry (MCR),</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># and will retrieve the latest version from the Fleet GitHub repository.</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># You can, however, build the Fleet images of your own; see the repository README for</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># more information.</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">REGISTRY</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;mcr.microsoft.com/aks/fleet&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">FLEET_VERSION</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>curl <span style="color:#4e9a06">&#34;https://api.github.com/repos/Azure/fleet/tags&#34;</span> <span style="color:#000;font-weight:bold">|</span> jq -r <span style="color:#4e9a06">&#39;.[0].name&#39;</span><span style="color:#204a87;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">HUB_AGENT_IMAGE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;hub-agent&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Clone the Fleet repository from GitHub.</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/Azure/fleet.git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Install the helm chart for running Fleet agents on the hub cluster.</span>
</span></span><span style="display:flex;"><span>helm install hub-agent fleet/charts/hub-agent/ <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set image.pullPolicy<span style="color:#ce5c00;font-weight:bold">=</span>Always <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set image.repository<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">$REGISTRY</span>/<span style="color:#000">$HUB_AGENT_IMAGE</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set image.tag<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">$FLEET_VERSION</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set <span style="color:#000">logVerbosity</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set <span style="color:#000">namespace</span><span style="color:#ce5c00;font-weight:bold">=</span>fleet-system <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set <span style="color:#000">enableWebhook</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set <span style="color:#000">webhookClientConnectionType</span><span style="color:#ce5c00;font-weight:bold">=</span>service <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set <span style="color:#000">enableV1Alpha1APIs</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --set <span style="color:#000">enableV1Beta1APIs</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
</span></span></code></pre></div><p>It may take a few seconds for the installation to complete. Once it finishes, verify that
the Fleet hub agents are up and running with the commands below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get pods -n fleet-system
</span></span></code></pre></div><p>You should see that all the pods are in the ready state.</p>
<h2 id="connect-a-member-cluster-to-the-hub-cluster">Connect a member cluster to the hub cluster</h2>
<p>Next, you will set up a cluster as the member cluster for your fleet. This cluster should
run a supported version of Kubernetes and be able to connect to the hub cluster via the network.</p>
<p>For your convenience, Fleet provides a script that can automate the process of joining a cluster
into a fleet. To use the script, follow the steps below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Replace the value of HUB_CLUSTER_ADDRESS with the address of your hub cluster API server.</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">HUB_CLUSTER_ADDRESS</span><span style="color:#ce5c00;font-weight:bold">=</span>YOUR-HUB-CLUSTER-ADDRESS
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Replace the value of MEMBER_CLUSTER with the name you would like to assign to the new member</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># cluster.</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Note that Fleet will recognize your cluster with this name once it joins.</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">MEMBER_CLUSTER</span><span style="color:#ce5c00;font-weight:bold">=</span>YOUR-MEMBER-CLUSTER
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Replace the value of MEMBER_CLUSTER_CONTEXT with the name of the kubeconfig context you use</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># for accessing your member cluster.</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">MEMBER_CLUSTER_CONTEXT</span><span style="color:#ce5c00;font-weight:bold">=</span>YOUR-MEMBER-CLUSTER-CONTEXT
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Run the script.</span>
</span></span><span style="display:flex;"><span>chmod +x fleet/hack/membership/join.sh
</span></span><span style="display:flex;"><span>./fleet/hack/membership/join.sh
</span></span></code></pre></div><p>It may take a few minutes for the script to finish running. Once it is completed, verify
that the cluster has joined successfully with the command below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl config use-context <span style="color:#000">$HUB_CLUSTER_CONTEXT</span>
</span></span><span style="display:flex;"><span>kubectl get membercluster <span style="color:#000">$MEMBER_CLUSTER</span>
</span></span></code></pre></div><p>The newly joined cluster should have the <code>JOINED</code> status field set to <code>True</code>. If you see that
the cluster is still in an unknown state, it might be that the member cluster
is still connecting to the hub cluster. Should this state persist for a prolonged
period, refer to the <a href="/docs/troubleshooting">Troubleshooting Guide</a> for
more information.</p>
<blockquote>
<p>Note</p>
<p>If you would like to know more about the steps the script runs, or would like to join
a cluster into a fleet manually, refer to the <a href="/dpcs/howtos/clusters">Managing Clusters</a> How-To
Guide.</p></blockquote>
<p>Repeat the steps above to join more clusters into your fleet.</p>
<h2 id="use-the-clusterresourceplacement-api-to-orchestrate-resources-among-member-clusters">Use the <code>ClusterResourcePlacement</code> API to orchestrate resources among member clusters.</h2>
<p>Fleet offers an API, <code>ClusterResourcePlacement</code>, which helps orchestrate workloads, i.e., any group
Kubernetes resources, among all member clusters. In this last part of the tutorial, you will use
this API to place some Kubernetes resources automatically into the member clusters via the hub
cluster, saving the trouble of having to create them one by one in each member cluster.</p>
<h3 id="create-the-resources-for-placement">Create the resources for placement</h3>
<p>Run the commands below to create a namespace and a config map, which will be placed onto the
member clusters.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl create namespace work
</span></span><span style="display:flex;"><span>kubectl create configmap app -n work --from-literal<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">data</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">test</span>
</span></span></code></pre></div><p>It may take a few seconds for the commands to complete.</p>
<h3 id="create-the-clusterresourceplacement-api-object">Create the <code>ClusterResourcePlacement</code> API object</h3>
<p>Next, create a <code>ClusterResourcePlacement</code> API object in the hub cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">apiVersion: placement.kubernetes-fleet.io/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">kind: ClusterResourcePlacement
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  name: crp
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  resourceSelectors:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">    - group: &#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">      kind: Namespace
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">      version: v1          
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">      name: work
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  policy:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">    placementType: PickAll
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>Note that the CRP object features a resource selector, which targets the <code>work</code> namespace you
just created. This will instruct the CRP to place the namespace itself, and all resources
registered under the namespace, such as the config map, to the target clusters. Also, in the <code>policy</code>
field, a <code>PickAll</code> placement type has been specified. This allows the CRP to automatically perform
the placement on all member clusters in the fleet, including those that join after the CRP object
is created.</p>
<p>It may take a few seconds for Fleet to successfully place the resources. To check up on the
progress, run the commands below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get clusterresourceplacement crp
</span></span></code></pre></div><p>Verify that the placement has been completed successfully; you should see that the <code>APPLIED</code> status
field has been set to <code>True</code>. You may need to repeat the commands a few times to wait for
the completion.</p>
<h3 id="confirm-the-placement">Confirm the placement</h3>
<p>Now, log into the member clusters to confirm that the placement has been completed.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl config use-context <span style="color:#000">$MEMBER_CLUSTER_CONTEXT</span>
</span></span><span style="display:flex;"><span>kubectl get ns
</span></span><span style="display:flex;"><span>kubectl get configmap -n work
</span></span></code></pre></div><p>You should see the namespace <code>work</code> and the config map <code>app</code> listed in the output.</p>
<h2 id="clean-things-up">Clean things up</h2>
<p>To remove all the resources you just created, run the commands below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># This would also remove the namespace and config map placed in all member clusters.</span>
</span></span><span style="display:flex;"><span>kubectl delete crp crp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl delete ns work
</span></span><span style="display:flex;"><span>kubectl delete configmap app -n work
</span></span></code></pre></div><p>To uninstall Fleet, run the commands below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl config use-context <span style="color:#000">$HUB_CLUSTER_CONTEXT</span>
</span></span><span style="display:flex;"><span>helm uninstall hub-agent
</span></span><span style="display:flex;"><span>kubectl config use-context <span style="color:#000">$MEMBER_CLUSTER_CONTEXT</span>
</span></span><span style="display:flex;"><span>helm uninstall member-agent
</span></span></code></pre></div><h2 id="whats-next">What&rsquo;s next</h2>
<p>Congratulations! You have completed the getting started tutorial for Fleet. To learn more about
Fleet:</p>
<ul>
<li><a href="/website/docs/concepts/">Read about Fleet concepts</a></li>
<li><a href="/website/docs/how-tos/crp/">Read about the ClusterResourcePlacement API</a></li>
<li><a href="/website/docs/api-reference/">Read the Fleet API reference</a></li>
</ul>

	<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/kubefleet-dev/website/issues/new">tell us how we can further improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="hhttps://github.com/kubefleet-dev/website/issues/new">tell us how we can fix the experience for you</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof gtag !== 'function') return;
    gtag('event', 'page_helpful', {
      'event_category': 'Helpful',
      'event_label': window.location.pathname,
      'value': value
    });
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback( 100 );
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>
<br />

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/kubefleet-dev/kubefleet" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025&ndash;2025
    <span class="td-footer__authors">KubeFleet Contributors | The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> | <a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a> |</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://github.com/kubefleet-dev/website/blob/main/PRIVACY_POLICY.md" target="_blank" rel="noopener">Privacy Policy</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/website/js/main.min.8bdc707530d61dee3a6fd659f8a422c05d2e2319377a8710175451ca21fa83b0.js" integrity="sha256-i9xwdTDWHe46b9ZZ&#43;KQiwF0uIxk3eocQF1RRyiH6g7A=" crossorigin="anonymous"></script>
<script defer src="/website/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/website/js/tabpane-persist.js'></script>

  </body>
</html>